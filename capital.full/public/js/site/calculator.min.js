!function(e){var t={};function a(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=84)}({84:function(e,t,a){e.exports=a(85)},85:function(e,t){var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};globalFunctions.getData=function(e,t,a){!function(e,a){axios.get(e,a).then(function(e){t(e)}).catch(function(e){console.log(e)})}(e,a)},globalFunctions.getLanguage=function(){return document.body.dataset.locale},globalVariables.messages={successResponse:"ru"===globalFunctions.getLanguage()?"Спасибо! ваша заявка принята!":"Дякуємо! Ваша заявка прийнята!",successDescr:"ru"===globalFunctions.getLanguage()?"Мы свяжемся с вами в ближайшее время.":"Ми зв'яжемося з вами найближчим часом.",errorResponse:"ru"===globalFunctions.getLanguage()?"Ошибка!":"Помилка!",errorResponseGadgets:"ru"===globalFunctions.getLanguage()?"Для просчета стоимости рекомендуем обратиться по адресу ближайшего отделения.":"Для розрахунку вартості радимо звернутись за адресою найближчого відділення.",errorDescr:"ru"===globalFunctions.getLanguage()?"Попробуйте еще раз":"спробуйте ще раз",errorDescr400:"ru"===globalFunctions.getLanguage()?"Превышена максимальная сумма":"Перевищено максимальну суму",yes:"ru"===globalFunctions.getLanguage()?"Да":"Так",no:"ru"===globalFunctions.getLanguage()?"Нет":"Нi",gold:(globalFunctions.getLanguage(),"Золото"),silver:"ru"===globalFunctions.getLanguage()?"Серебро":"Срiбло",isPhoto:"ru"===globalFunctions.getLanguage()?"Необходимо добавить фото изделия":"Необхідно завантажити фото виробу",transported_to:"ru"===globalFunctions.getLanguage()?"Перенесено в №":"Перенесено до №",find_nothing:"ru"===globalFunctions.getLanguage()?"Ничего не найдено!":"Нічого не знайдено!",work_time:"ru"===globalFunctions.getLanguage()?"Время работы":"Час роботи"},$(document).ready(function(){var e,t;!function(){if($("#calculatorPage").length||$("#specialPage").length){var a=$("#2"),o=$("#32"),r=$("#3"),n=($("#3_chosen"),$("#4")),l=$("#35"),s=($("#35_chosen"),$("#36")),i=$("#gold-tab .slider-range"),c=$("#silver-tab .slider-range"),u=!1;$("#startBlock").on("click",".seriesTab",function(){var e=$(this).closest("form");p(e),function(e){var t=e instanceof jQuery?e[0]:e;t.querySelector(".resultBlock .product-description .name").innerHTML="",t.querySelector(".resultBlock .product-description .price").innerHTML="",$(t).find(".resultBlock .imgWrapper > img").hide(),t.querySelector(".resultBlock .condition > p").innerHTML="",t.querySelector(".resultBlock .set > p").innerHTML=""}(e),m(e)}),$("body").on("click",".hideResult",function(){m($(this).closest("form"))}),$(".calculate-form").on("submit",function(){return!1}),$(".calculate-form").on("click",".submitButton",function(e){e.preventDefault();var a=this.form;if($(this).closest(".calculate-form").is("#gold-form"))h("#gold-form","#3_chosen","#3","#4_chosen","#4");else if($(this).closest(".calculate-form").is("#silver-form"))h("#silver-form","#35_chosen","#35","#36_chosen","#36");else if($(this).closest(".calculate-form").is("#technics-form")){var o=a.querySelector('input[name="condition"]:checked'),r=a.querySelector('input[name="set"]:checked');a.querySelector(".resultBlock .condition > p").innerHTML=o.value,a.querySelector(".resultBlock .set > p").innerHTML=r.value;var n=document.getElementsByClassName("subToggleBlocks-list")[0],l=document.querySelectorAll(".subToggleBlocks-list > .toggleBlock"),s=$("#technics-tab .photoDropzone .dz-image img").attr("src");if(s&&(a.querySelector(".resultBlock .imgWrapper > img").src=s,$(a).find(".resultBlock .imgWrapper > img").show()),t){var i=o.dataset.multiplier,c=r.dataset.multiplier,u="/calculator/correct-price/"+t.price+"/"+i+"/"+c;globalFunctions.getData(u,function(e,a){return function(o){var r=Math.floor(o.data);e.querySelector(".resultBlock .product-description .name").innerHTML=t.model,e.querySelector('.resultBlock .product-description input[name="price"]').value=r,e.querySelector('.resultBlock .imgWrapper input[name="image"]').value=t.image,$(".request-answer").addClass("flex"),function(e,t){var a=$(t);a.find(".resultBlock .imgWrapper > img").show(),e.image?a.find(".resultBlock .imgWrapper > img").attr("src",e.image):a.find(".resultBlock .imgWrapper > img").hide()}(t,e),SwitchTabsModule.switchSeriesTabs(a,l,globalVariables.currentGroup),globalFunctions.animateBlock(n)}}(this.form,this))}else{var d=[];$("#101").val()&&d.push($("#101").val()),$("#102").val()&&d.push($("#102").val()),$("#103").val()&&d.push($("#103").val()),$("#106").val()&&d.push($("#106").val()),$("#107").val()&&d.push($("#107").val()),$("#108").val()&&d.push($("#108").val()),$("#109").val()&&d.push($("#109").val());var g=d.join(", ");a.querySelector(".resultBlock .product-description .name").innerHTML=g,$(".request-answer").removeClass("flex"),f(a),SwitchTabsModule.switchSeriesTabs(this,l,globalVariables.currentGroup),globalFunctions.animateBlock(n)}}}),$(".calculate-form").on("click",".submitFormButton",function(){var e=$(this).closest(".toggleBlock");if(ValidationModule.isValid(e)){$(this.parentElement).addClass("js_loading"),$(this).addClass("js_loading"),this.setAttribute("disabled","true");var t=this.form,a=function(e){var t=e.querySelectorAll("input:not([type=radio])"),a=e.querySelectorAll("input[type=radio]"),o=e.querySelectorAll("select"),r=e.querySelectorAll("textarea"),n={};if(t.length)for(var l=0;l<t.length;l++)t[l].value&&(n[t[l].name]=t[l].value);if(a.length)for(var s=0;s<a.length;s++){var i=a[s];i.value&&i.checked&&(n[i.name]=i.value)}if(o.length)for(var c=0;c<o.length;c++)o[c].value&&"placeholder"!=o[c].value&&(n[o[c].name]=o[c].value);if(r.length)for(var u=0;u<r.length;u++)r[u].value&&(n[r[u].name]=r[u].value);return n}(t);if("technics-form"===t.id){var o=function(){dataLayer&&(console.log("in handleGadgetsStatistic"),dataLayer.push({event:"calculate_technique"}))},r=function(){var e=document.getElementById("popupMessage");e.querySelector(".title").innerHTML=globalVariables.messages.errorResponseGadgets;PopupModule.openPopup(e)};$(".toggleBlock.active .prevButton, .toggleBlock.active .seriesTab").on("click",function(){u&&(k(),u=!1),$(".toggleBlock.active .prevButton, .toggleBlock.active .seriesTab").off("click")}),y("/calculator/gadgets-requests",a,function(e,t){return function(t){$(".request-answer").show(),200==t.status?o():t.response&&400==t.response.status?($(".request-answer").hide(),r()):t.response&&t.response.status&&$(".request-answer__text").text(globalVariables.messages.errorResponseGadgets),u=!0,k(),f(e)}}(t))}else if(t.classList.contains("special_ability_form")){var n=function(e){if(dataLayer)switch(console.log("in handleDiamondsAntiquesClocksJewelryStatistic type:",e.type),e.type){case"diamond":dataLayer.push({event:"calculate_diamond"});break;case"antiques":dataLayer.push({event:"calculate_antiques"});break;case"watch":dataLayer.push({event:"calculate_clock"});break;case"jewelry":dataLayer.push({event:"calculate_jewerly"})}};y("/calculator/special-abilities",a,function(e,t){return function(a){var o=document.getElementById("popupMessage");200==a.status?(o.querySelector(".title").innerHTML=globalVariables.messages.successResponse,o.querySelector(".description > p").innerHTML=globalVariables.messages.successDescr,p(e),n(t)):(o.querySelector(".title").innerHTML=globalVariables.messages.errorResponse,o.querySelector(".description > p").innerHTML=globalVariables.messages.errorDescr),PopupModule.openPopup(o)}}(t,a))}}}),L(function(e){_(e.data,a,"hallmark"),x(a,r,d)})("/calculator/get-hallmarks",{params:{category:"1"}}),L(function(e){_(e.data,o,"hallmark"),x(o,l,g)})("/calculator/get-hallmarks",{params:{category:"2"}});var d=L(function(e){var t=e.data.filter(function(e){return 1==e.calc_category_id}),a="ru"==$("body").data("locale")?"title_ru":"title_uk";_(t,r,a),S(r,e.data,a,i,1,n)});r.prop("disabled",!0).trigger("chosen:updated");var g=L(function(e){var t=e.data.filter(function(e){return 2==e.calc_category_id}),a="ru"==$("body").data("locale")?"title_ru":"title_uk";_(t,l,a),S(l,e.data,a,c,2,s)});l.prop("disabled",!0).trigger("chosen:updated")}function p(a){var o=a instanceof jQuery?a[0]:a;(o.reset(),$(o).find(".chosen-wrapper  select").trigger("chosen:updated"),$(o).is("#technics-form"))&&(e=null,t=null,o.querySelector('.resultBlock .product-description input[name="price"]').value="",o.querySelector('.resultBlock .imgWrapper input[name="image"]').value="",function(e){var t=e instanceof jQuery?e[0]:e,a=void 0;if(globalVariables.myDropzone.length)for(var o=0;o<globalVariables.myDropzone.length;o++)if(globalVariables.myDropzone[o].element.id===t.id){a=globalVariables.myDropzone[o];break}return a}(document.getElementById("photoDropzoneGadgets")).removeAllFiles(!0))}function f(e){var t=e instanceof jQuery?e[0]:e;t.querySelector(".no-result-block").classList.remove("active"),t.querySelector(".has-result-block").classList.add("active"),t.querySelector(".resultBlock").classList.add("hasResult")}function m(e){var t=e instanceof jQuery?e[0]:e;t.querySelector(".no-result-block").classList.add("active"),t.querySelector(".has-result-block").classList.remove("active"),t.querySelector(".resultBlock").classList.remove("hasResult")}function h(e,t,a,o,r){if(!ValidationModule.isValid($(e)))return!1;function n(e,a){var r=e.data.overPayment.toFixed(2),n=e.data.amount.toFixed(2),l=$(a+" .overPayment-js"),s=$(a+" .amount-js"),i=$(a+" .amount-discount-js"),c=$(a+" .js_setTariff"),d=$(t+" .chosen-single span").text();l.text(r+" грн"),s.text(n+" грн"),i.text((r-20*r/100).toFixed(2)+" грн"),function(){for(var e=$("#3 option"),t=0;t<e.length;t++)if($(e[t]).text()==d){var a=$(e[t]).data("tariff");if(a)return void c.text('"'+a+'"')}c.text('"'+d+'"')}(),function(e){var t=$(e+" .has-result-block .graph-item:nth(1)"),a=$(e+" .has-result-block .graph-item:nth(2)");t.removeClass("disabled"),a.hide()}(a),$(a+" .calcModal").on("click",function(e){e.preventDefault();var t=document.querySelector("#popupRequest .submitButtonWrapper button[type=submit]"),l=$(".resWeight-js"),s=$(".resHall-js"),i=$(".resStones-js"),c=$(".resTariff-js"),d=$(".resDays-js"),g=$(".resOverPayment-js"),p=$(".resAmount-js");l.text($(a+" input[name=weight]").val()),s.text($(a+" select[name=hallmark]").val()),i.text($(a+" input[name=additions]:checked").hasClass("yes")?globalVariables.messages.yes:globalVariables.messages.no),c.text($(a+" select[name=tariff]").val()),d.text($(a+" .slider-range").slider("value")),g.text(r+" грн"),p.text(n+" грн");var f=$("#404m");L(function(e){var t=e.data,a="ru"===globalFunctions.getLanguage()?"title_ru":"title_uk";_(t,f,a)})("/calculator/get-cities"),t.onclick=function(e){e.preventDefault();var t=$(this).closest($(".calculate-form"));if(!ValidationModule.isValid(t))return!1;var r=$("#401m"),n=$("#402m"),f=$("#403m"),m=$("#404m_chosen .chosen-single span"),h=$("#popupRequest input[name^=files]"),v="#gold-form"==a?globalVariables.messages.gold:globalVariables.messages.silver,b={weight:Number(l.text()),hallmark:Number(s.text()),stone:i.text()==globalVariables.messages.yes?1:0,tariff:c.text(),term:Number(d.text()),overpayment:Number(g.text().replace(/\s?[а-я]/gi,"")),amount:Number(p.text().replace(/\s?[а-я]/gi,"")),name:r.val(),phone:n.val(),email:f.val(),city:m.text(),client_status:$(o+" .chosen-single span").text(),category:v};h.val()&&(b.files=h.val()),axios({method:"post",url:"/calculator/requests",data:b}).then(function(e){var t;(t=document.getElementById("popupMessage")).querySelector(".title").innerHTML=globalVariables.messages.successResponse,t.querySelector(".description > p").innerHTML=globalVariables.messages.successDescr,PopupModule.openPopup(t),dataLayer&&(console.log("in handleGoldAndSilverFormsStatistic: category",b.category),"Золото"==b.category?dataLayer.push({event:"calculate_zoloto"}):dataLayer.push({event:"calculate_silver"})),PopupModule.closePopup(document.getElementById("popupRequest"))}).catch(function(e){u(),console.log(e)})}})}function l(e,t){for(var a=$(e+" .chosen-single span").text(),o=$(t+" option"),r=[],n=0;n<o.length;n++)r[n]=$(o[n]).text();var l=r.indexOf(a);return"#3_chosen"==e||"#35_chosen"==e?$(o[l]).data("id"):"#4_chosen"==e||"#36_chosen"==e?$(o[l]).data("id"):void 0}var s=l(t,a)||$(a+" option:selected").data("id"),i=l(o,r)||$(r+" option:selected").data("id"),c={weight:$(e+" input[name=weight]").val(),hallmark:$(e+" select[name=hallmark]").val(),tariff:s,status:i,days:$(e+" .slider-range").slider("value")};function u(e){var t=document.getElementById("popupMessage");t.querySelector(".title").innerHTML=globalVariables.messages.errorResponse,t.querySelector(".description > p").innerHTML=globalVariables.messages.errorDescr;if(400===e)t.querySelector(".description > p").innerHTML=globalVariables.messages.errorDescr400;PopupModule.openPopup(t)}axios.get("/calculator/calculate",{params:c}).then(function(t){f($(e)),n(t,e)}).catch(function(e){u(e.response.status)})}function v(){if(globalVariables.myDropzone&&globalVariables.myDropzone.length){var e=!0,t=!1,a=void 0;try{for(var o,r=globalVariables.myDropzone[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){o.value.removeAllFiles(!0)}}catch(e){t=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw a}}}}function b(){var e=$(".calculate-form .more-button-container.js_loading");e.removeClass("js_loading"),e.children(".submitFormButton").removeClass("js_loading"),e.children(".submitFormButton").removeAttr("disabled")}function y(e,t,a,o){axios.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),function(e,t,o){axios({method:"post",url:e,data:t}).then(function(e){200==e.status&&(a(e),v(),b())}).catch(function(e){console.error(e),a(e),v(),b()})}(e,t)}function k(){$(".js_block_toggle").toggleClass("active")}function _(e,t,a){if(t.empty(),t.append('<option value="placeholder" style="display:none">'+t.data("placeholder")+"</option>"),"string"==typeof e[0])for(var o=0;o<e.length;o++)t.append("<option>"+e[o]+"</option>");else e.map(function(e){if(e.id)if(e.related_tariff){var o="ru"==$("body").data("locale")?"title_ru":"title_uk",r=e.related_tariff[o].replace(/"/g,"");t.append('<option data-tariff="'+r+'" data-id="'+e.id+'">'+e[a]+"</option>")}else t.append('<option data-id="'+e.id+'">'+e[a]+"</option>");else t.append("<option>"+e[a]+"</option>")});t.trigger("chosen:updated")}function L(e){return function(t,a){axios.get(t,a).then(function(t){e(t)}).catch(function(e){console.log(e)})}}function x(e,t,a){e.chosen().change(function(e,o){t.prop("disabled",!1).trigger("chosen:updated"),a("/calculator/get-tariffs",{params:{hallmark:""+(this[this.selectedIndex].value||o.selected)}})})}function S(e,t,a,o,r,n){e.chosen().change(function(l,s){var i,c=this,u=t.filter(function(e){return window.innerWidth<768?e.calc_category_id==r&&e[a]==$(c).val():e.calc_category_id==r&&e[a]==s.selected});i=u[0].terms[u[0].terms.length-1].to,o.slider("option",{disabled:!1,max:i,value:1});var d=o.slider("value");o.find(".text").text(d),function(e,t,a,o,r,n){var l=e.filter(function(e){if(window.innerWidth<768){var r=n.val();return e.calc_category_id==a&&e[t]==r}return e.calc_category_id==a&&e[t]==o.selected});r.empty(),l[0].statuses.map(function(e){r.append('<option data-id="'+e.id+'">'+e[t]+"</option>")}),r.prop("disabled",!1).trigger("chosen:updated")}(t,a,r,s,n,e)})}}(),function(){if($("#calculatorPage").length||$("#specialPage").length){if($("#calculatorPage").length){var o=function(t){e=t.data.models,u(l,t.data.models,"model"),l.prop("disabled",!1).trigger("chosen:updated")},r=function(e){var t="ru"===globalFunctions.getLanguage()?"meta_title_ru":"meta_title_uk",a="ru"===globalFunctions.getLanguage()?"address_ru":"address_uk";e.data.length&&(u(i,e.data,t,a),i.prop("disabled",!1).trigger("chosen:updated"))},n=$("#311"),l=$("#312"),s=$("#404"),i=$("#405");globalFunctions.getData("/calculator/get-brands",function(e){u(n,e.data.brands)}),l.prop("disabled",!0).trigger("chosen:updated"),n.chosen().change(function(e,t){var a={brand:this[this.selectedIndex].value||t.selected};globalFunctions.getData("/calculator/get-models",o,{params:a})}),l.chosen().change(function(a,o){t=function(e,t,a){var o=null;if(e)for(var r=0;r<e.length;r++)if(e[r][a]==t){o=e[r];break}return o}(e,this[this.selectedIndex].value,"model")});globalFunctions.getData("/calculator/get-cities",function(e){var t="ru"===globalFunctions.getLanguage()?"title_ru":"title_uk";u(s,e.data,t)}),i.prop("disabled",!0).trigger("chosen:updated"),s.chosen().change(function(e,t){var a=function(e,t){var a=void 0;if(e){var o=e.children;if(o)for(var r=0;r<o.length;r++)if(o[r].innerHTML===t){a=o[r].dataset.id;break}}return a}(e.target,this[this.selectedIndex].value||t.selected);a&&globalFunctions.getData("/calculator/get-departments/"+a,r)})}if($("#specialPage").length){var c=$("#301");globalFunctions.getData("/calculator/get-watches",function(e){u(c,e.data,"brand")})}}function u(e,t,o,r){if(e.empty(),e.append('<option value="placeholder" style="display:none">'+e.data("placeholder")+"</option>"),t){if(Array.isArray(t)&&"object"!=a(t[0]))for(var n=0;n<t.length;n++)e.append("<option>"+t[n]+"</option>");else"object"===a(t[0])&&t.map(function(t){var a=document.createElement("option");a.setAttribute("data-id",t.id||"none"),a.innerHTML=r?t[o]+" ("+t[r]+")":t[o],e.append($(a))});e.trigger("chosen:updated")}}}()})}});